<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –í–∏–∫–∞!</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #ffecd2, #fcb69f);
      color: #333;
      text-align: center;
      padding: 20px;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    h1, p {
      animation: fadeIn 1s ease-in-out;
      margin: 10px 0;
    }
    .hidden {
      display: none;
    }
    button {
      padding: 16px 32px;
      font-size: 1.2em;
      background-color: #ff6f61;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.1s ease, background 0.3s ease, box-shadow 0.3s ease;
      margin-top: 20px;
      box-shadow: 0 5px 15px rgba(255, 111, 97, 0.4);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active {
      transform: scale(0.95);
      background-color: #e65549;
      box-shadow: 0 3px 7px rgba(230, 85, 73, 0.7);
    }
    button:hover:not(:active) {
      box-shadow: 0 7px 20px rgba(255, 111, 97, 0.7);
    }
    input {
      padding: 14px 18px;
      font-size: 1.1em;
      border-radius: 10px;
      border: 2px solid #ff6f61;
      margin-top: 20px;
      width: 80%;
      max-width: 400px;
      box-sizing: border-box;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    input:focus {
      outline: none;
      border-color: #e65549;
      box-shadow: 0 0 8px #e65549;
    }
    .hint {
      font-size: 1em;
      color: #666;
      margin-top: 12px;
      font-style: italic;
      opacity: 0;
      animation: fadeInHint 1s forwards;
      max-width: 90vw;
      margin-left: auto;
      margin-right: auto;
    }
    #feedback {
      font-weight: 600;
      margin-top: 12px;
      min-height: 24px;
      font-size: 1.1em;
    }
    .correct {
      color: #4caf50;
    }
    .wrong {
      color: #f44336;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeInHint {
      to { opacity: 1; }
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-6px); }
      100% { transform: translateX(0); }
    }
    .shake {
      animation: shake 0.4s;
    }
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: #fff;
      animation-name: fall;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
      opacity: 0.9;
      border-radius: 50%;
      pointer-events: none;
      z-index: 1000;
    }
    @keyframes fall {
      0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    .counter-box {
      margin: 25px auto;
      font-size: 1.3em;
      padding: 18px 20px;
      background: #fff4f4;
      border-radius: 16px;
      max-width: 480px;
      box-shadow: 0 4px 10px rgba(255, 111, 97, 0.3);
    }
    .share-btn {
      margin-top: 30px;
      font-size: 1.2em;
      background-color: #0077ff;
      box-shadow: 0 5px 15px rgba(0, 119, 255, 0.5);
      transition: box-shadow 0.3s ease;
    }
    .share-btn:hover:not(:active) {
      box-shadow: 0 7px 25px rgba(0, 119, 255, 0.7);
    }
    @media (max-width: 480px) {
      button {
        padding: 14px 28px;
        font-size: 1.1em;
      }
      input {
        width: 90%;
        font-size: 1em;
      }
      .counter-box {
        font-size: 1.1em;
        padding: 15px 18px;
      }
      h1 {
        font-size: 1.8em;
      }
      p {
        font-size: 1.1em;
      }
    }
  </style>
</head>
<body>

  <audio id="bg-music" autoplay loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/02/15/audio_f5f7e87a67.mp3?filename=ethnic-asian-music-13441.mp3" type="audio/mpeg" />
    –¢–≤–æ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
  </audio>

  <audio id="correct-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_47f8f2f259.mp3?filename=correct-2-46134.mp3"></audio>
  <audio id="wrong-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_b8933cb09f.mp3?filename=wrong-answer-126515.mp3"></audio>
  <audio id="final-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c1e70ef863.mp3?filename=success-fanfare-trumpets-6185.mp3"></audio>

  <div id="start-screen">
    <h1>–ü—Ä–∏–≤–µ—Ç, –í–∏–∫–∞! üéÅ</h1>
    <p>–†–∞–∑–≥–∞–¥–∞–π 6 –∑–∞–≥–∞–¥–æ–∫ –∏ –ø–æ–ª—É—á–∏ —Å–≤–æ—ë –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ!</p>
    <button id="start-btn">–ù–∞—á–∞—Ç—å</button>
  </div>

  <div id="puzzle-screen" class="hidden" aria-live="polite" aria-atomic="true">
    <h1 id="riddle-title">–ó–∞–≥–∞–¥–∫–∞</h1>
    <p id="riddle-text">–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</p>
    <input type="text" id="answer" autocomplete="off" placeholder="–¢–≤–æ–π –æ—Ç–≤–µ—Ç" aria-label="–û—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É" />
    <div class="hint" id="hint-text"></div>
    <button id="answer-btn">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
    <p id="feedback" role="alert" aria-live="assertive"></p>
  </div>

  <div id="congrats-screen" class="hidden" aria-live="polite">
    <h1>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –í–∏–∫–∞! üéâ</h1>
    <p>
      –¢—ã —Ä–∞–∑–≥–∞–¥–∞–ª–∞ –≤—Å–µ –∑–∞–≥–∞–¥–∫–∏!<br />
      –ñ–µ–ª–∞—é —Ç–µ–±–µ —Å—á–∞—Å—Ç—å—è, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç–æ—è—â–µ–π –º–∞–≥–∏–∏ –≤ –∫–∞–∂–¥–æ–º –¥–Ω–µ! üíñ
    </p>

    <div class="counter-box" id="age-counter">
      ‚è≥ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–æ–∑—Ä–∞—Å—Ç –∏ –¥–Ω–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –î–Ω—è –†–æ–∂–¥–µ–Ω–∏—è...
    </div>

    <button class="share-btn" id="share-btn">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º</button>
  </div>

  <script>
    const riddles = [
      {
        question: "–Ø –≤ –Ω–µ–±–µ –Ω–æ—á—å—é, –º–µ—á—Ç—ã –Ω–∞–≤–æ–∂—É‚Ä¶ –ß—Ç–æ —è?",
        answers: ["–ª—É–Ω–∞", "–º–µ—Å—è—Ü"],
        hint: "–°–≤–µ—Ç–∏—Ç –Ω–æ—á—å—é, –∏–Ω–æ–≥–¥–∞ –∏—Å—á–µ–∑–∞–µ—Ç",
      },
      {
        question: "–û–Ω –±–µ–∑ –∑—É–±–æ–≤, –Ω–æ –≥—Ä—ã–∑—ë—Ç. –ß—Ç–æ —ç—Ç–æ?",
        answers: ["–≤—Ä–µ–º—è"],
        hint: "–õ–µ—Ç–∏—Ç, –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—è—Å—å",
      },
      {
        question: "–ö—Ç–æ –≤—Å–µ–≥–¥–∞ –∏–¥—ë—Ç, –Ω–æ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è —Å –º–µ—Å—Ç–∞?",
        answers: ["—á–∞—Å—ã"],
        hint: "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è",
      },
      {
        question: "–ë–µ–∑ —è–∑—ã–∫–∞, –∞ –≥–æ–≤–æ—Ä–∏—Ç.",
        answers: ["—Ä–∞–¥–∏–æ", "—ç—Ö–æ"],
        hint: "–°–ª—É—à–∞–µ–º –≤ –Ω–∞—É—à–Ω–∏–∫–∞—Ö –∏–ª–∏ –≤ –≥–æ—Ä–∞—Ö",
      },
      {
        question: "–ù–µ –ª–∞–µ—Ç, –Ω–µ –∫—É—Å–∞–µ—Ç, –∞ –≤ –¥–æ–º –Ω–µ –ø—É—Å–∫–∞–µ—Ç.",
        answers: ["–∑–∞–º–æ–∫"],
        hint: "–ö–ª—é—á –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å",
      },
      {
        question: "–í—Å–µ–≥–¥–∞ —Å–æ –º–Ω–æ–π, –Ω–æ –≤ –∑–µ—Ä–∫–∞–ª–æ —Å–º–æ—Ç—Ä–∏—Ç.",
        answers: ["—Ç–µ–Ω—å"],
        hint: "–°–ª–µ–¥—É–µ—Ç –∑–∞ –º–Ω–æ–π –≤ —Å–æ–ª–Ω–µ—á–Ω—ã–π –¥–µ–Ω—å",
      },
    ];

    let current = 0;
    const correctSound = document.getElementById("correct-sound");
    const wrongSound = document.getElementById("wrong-sound");
    const finalSound = document.getElementById("final-sound");

    const startScreen = document.getElementById("start-screen");
    const puzzleScreen = document.getElementById("puzzle-screen");
    const congratsScreen = document.getElementById("congrats-screen");
    const riddleTitle = document.getElementById("riddle-title");
    const riddleText = document.getElementById("riddle-text");
    const answerInput = document.getElementById("answer");
    const feedback = document.getElementById("feedback");
    const hintText = document.getElementById("hint-text");
    const ageCounter = document.getElementById("age-counter");
    const bgMusic = document.getElementById("bg-music");

    document.getElementById("start-btn").addEventListener("click", () => {
      startScreen.classList.add("hidden");
      puzzleScreen.classList.remove("hidden");
      showRiddle();
      bgMusic.play();
    });

    document.getElementById("answer-btn").addEventListener("click", checkAnswer);

    answerInput.addEventListener("keypress", function (e) {
      if (e.key === "Enter") {
        checkAnswer();
      }
    });

    function showRiddle() {
      riddleTitle.textContent = `–ó–∞–≥–∞–¥–∫–∞ ${current + 1} –∏–∑ ${riddles.length}`;
      riddleText.textContent = riddles[current].question;
      answerInput.value = "";
      feedback.textContent = "";
      feedback.className = "";
      hintText.textContent = `–ü–æ–¥—Å–∫–∞–∑–∫–∞: ${riddles[current].hint}`;
    }

    function checkAnswer() {
      const userAnswer = answerInput.value.trim().toLowerCase();
      const correct = riddles[current].answers;

      if (correct.includes(userAnswer)) {
        correctSound.play();
        feedback.textContent = "–ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
        feedback.className = "correct";
        current++;
        if (current < riddles.length) {
          setTimeout(() => {
            showRiddle();
            answerInput.focus();
          }, 800);
        } else {
          setTimeout(() => {
            puzzleScreen.classList.add("hidden");
            congratsScreen.classList.remove("hidden");
            finalSound.play();
            launchConfetti();
            showAgeCounter();
          }, 800);
        }
      } else {
        wrongSound.play();
        feedback.textContent = "–ù–µ —Å–æ–≤—Å–µ–º‚Ä¶ –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë üòâ";
        feedback.className = "wrong";
        answerInput.classList.add("shake");
        setTimeout(() => answerInput.classList.remove("shake"), 400);
        answerInput.focus();
      }
    }

    function launchConfetti() {
      for (let i = 0; i < 120; i++) {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.animationDuration = (Math.random() * 3 + 2) + "s";
        confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 60%)`;
        confetti.style.width = confetti.style.height = (Math.random() * 7 + 5) + "px";
        confetti.style.top = -10 + "px";
        document.body.appendChild(confetti);

        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }

    function showAgeCounter() {
      const birthDate = new Date(2009, 10, 3); // 3 –Ω–æ—è–±—Ä—è 2009 (–º–µ—Å—è—Ü—ã —Å 0)
      const nextBirthdayYear = (new Date()).getMonth() > 10 || ((new Date()).getMonth() === 10 && (new Date()).getDate() > 3) ? 2025 : 2024;
      const nextBirthday = new Date(nextBirthdayYear, 10, 3);
      const now = new Date();

      const diffTime = nextBirthday - now;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

      const age = nextBirthdayYear - birthDate.getFullYear();

      ageCounter.textContent = `–¢–µ–±–µ –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è ${age} –ª–µ—Ç —á–µ—Ä–µ–∑ ${diffDays} ${declOfNum(diffDays, ['–¥–µ–Ω—å', '–¥–Ω—è', '–¥–Ω–µ–π'])}.`;
    }

    function declOfNum(number, titles) {
      const cases = [2, 0, 1, 1, 1, 2];
      return titles[
        (number % 100 > 4 && number % 100 < 20)
          ? 2
          : cases[(number % 10 < 5) ? number % 10 : 5]
      ];
    }

    // –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Äî —á–µ—Ä–µ–∑ Web Share API, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
    document.getElementById("share-btn").addEventListener("click", () => {
      const shareData = {
        title: "–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –í–∏–∫–∞!",
        text: "–ü–æ—Å–º–æ—Ç—Ä–∏ –º–æ—ë –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –í–∏–∫–∏! üéâ",
        url: window.location.href
      };

      if (navigator.share) {
        navigator.share(shareData)
          .then(() => console.log("–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"))
          .catch((err) => alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ: " + err));
      } else {
        alert("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ñ—É–Ω–∫—Ü–∏—è '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è' –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º. –ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.");
      }
    });
  </script>
</body>
</html>
